{"primaryContentSections":[{"kind":"content","content":[{"anchor":"What-Activity-brings-to-us","level":2,"type":"heading","text":"What Activity brings to us"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Activity enables Event-driven partially."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Verge supports to send any events that wonâ€™t be stored persistently. Even if an application runs with State-Driven, it might have some issues that not easy to something with State-Driven."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For example, something that would happen with the timerâ€™s trigger. Itâ€™s probably not easy to expressing that as a state."},{"type":"text","text":" "},{"type":"text","text":"In this case, Activity helps that can do easily."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This means Verge can use Event-Driven from Data-Driven partially."},{"type":"text","text":" "},{"type":"text","text":"We think itâ€™s not so special concept. SwiftUI supports these use cases as well that using Combineâ€™s Publisher."}]},{"type":"codeListing","syntax":"swift","code":["func onReceive<P>(_ publisher: P, perform action: @escaping (P.Output) -> Void) -> some View where P : Publisher, P.Failure == Never"]},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/swiftui\/view\/3365935-onreceive"}]},{"anchor":"Add-Activity-to-the-Store","level":2,"type":"heading","text":"Add Activity to the Store"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In sample code following this:"}]},{"type":"codeListing","syntax":"swift","code":["final class MyStore: StoreComponentType {","","  struct State {","    ...","  }","","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To enable using Activity, we add new decralation just like this:"}]},{"type":"codeListing","syntax":"swift","code":["final class MyStore: StoreComponentType {","","  struct State {","    ...","  }","","  \/\/\/ ðŸ‘‡","  enum Activity {","    case didSendMessage","  }","","}"]},{"anchor":"Send-an-Activity","level":2,"type":"heading","text":"Send an Activity"},{"type":"paragraph","inlineContent":[{"type":"text","text":"And finally, that Store now can emit an activity that we created."}]},{"type":"codeListing","syntax":"swift","code":["extension MyStore {","  func sendMessage() {","    send(.didSendMessage)","  }","}"]},{"anchor":"Subscribe-the-Activity","level":2,"type":"heading","text":"Subscribe the Activity"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Normal"}]}]},{"type":"codeListing","syntax":"swift","code":["store.sinkActivity { activity in","  ...","}",".store(in: &subscriptions)"]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Using Combine"}]}]},{"type":"codeListing","syntax":"swift","code":["store","  .activityPublisher","  .sink { event in","    \/\/ do something","  }","  .store(in: &subscriptions)"]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/verge\/activity"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/Verge\/documentation\/Verge\/Activity","interfaceLanguage":"swift"},"kind":"article","metadata":{"roleHeading":"Article","title":"Activity","role":"article","modules":[{"name":"Verge"}]},"hierarchy":{"paths":[["doc:\/\/Verge\/documentation\/Verge"]]},"references":{"doc://Verge/documentation/Verge":{"role":"collection","title":"Verge","abstract":[],"identifier":"doc:\/\/Verge\/documentation\/Verge","kind":"symbol","type":"topic","url":"\/documentation\/verge"},"https://developer.apple.com/documentation/swiftui/view/3365935-onreceive":{"title":"Appleâ€™s SwiftUI Ref","titleInlineContent":[{"type":"text","text":"Appleâ€™s SwiftUI Ref"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/swiftui\/view\/3365935-onreceive","url":"https:\/\/developer.apple.com\/documentation\/swiftui\/view\/3365935-onreceive"}}}